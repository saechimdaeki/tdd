# 11 마치며

## TDD 전파하기

TDD가 어느 정도 몸에 붙으면 다음의 효과를 느낄 수 있다.

- 결함 감소
- 스트레스 감소
- 빠른 피드백

TDD를 전파하려면 본인이 먼저 TDD에 익숙해져야 한다. 아직 TDD가 익숙하지 않다면 먼저 개인 프로젝트를 통해 TDD를 연마해야 한다. TDD가 익숙해지기 싲가하면

업무에 적용한다. 이 시점이 되면 테스트 코드를 왜 만드냐는 주변의 물음에 더 적은 결함, 더 적은 스트레스, 더 빠른 개발이라는 실질적인 결과를 보여 줄 수 있다.

물론 100% TDD로 개발할 수는 없겠지만 할 수 있는 한 많은 범위를 TDD로 개발하는 것이 중요하다.

### 짝 코딩을 통한 전파

하나둘 TDD에 관심을 두는 사람들이 생기면 입문할 수 있도록 도와주어야 한다. 이런 개발자에게 TDD를 전파하는 가장 좋은 방법은 짝 코딩을 하는것이다.

- 테스트 코드를 만들고 실행하는 방법을 보여준다
- 대역을 생성하고 사용하는 방법을 보여준다
- 무엇보다 실제 업무에서 다루는 코드로 TDD를 경험하게 한다.

짝 코딩은 직접 테스트 코드를 경험하게 함으로써 테스트 코드 작성에 대한 거부감을 줄이고 테스트 코드가 주는 이점을 느낄 수 있는 기회를 제공한다

### 레거시 코드에 대한 테스트 추가

레거시 코드처럼 TDD하기 힘든 코드는 테스트 코드라도 만들어보자.

![image](https://user-images.githubusercontent.com/40031858/136890726-65b7de4c-33cb-4511-9864-eff90c852a39.png)

이렇게 점진적으로 코드를 분리하고 테스트 코드를 만드는 과정을 반복하면 이미 동작하는 기능에 대한 영향은 최소화하면서 테스트를 추가할 수 있다.

테스트를 추가하는 만큼 리팩토링, 기능 변경, 테스트 추가가 더욱 수월해진다. 일단 레거시 코드에 테스트가 들어가기 시작하면 이제 테스트 코드를 이용해서 동료들과

협업할 있게 된다. 예를 들면 테스트 코드를 이용해서 코드의 동작 방식을 설명할 수 있게 되고 수정사항이 들어오면 검증할 수 있는 테스트 코드를 같이 작성하고 이를

통과시키는 방식으로 협업이 가능해진다.

## TDD와 개발 시간

TDD를 경험하지 않은 개발자는 다음과 같은 이야기로 TDD 적용을 반대한다

- 개발할 시간도 없는데 언제 테스트 코드를 작성하냐?

오히려 개발 시간 에대한 이해가 부족한 개발자가 이런 말을 할 때가 많다. 개발 시간은 크게 세 가지로 나눌 수 있다

- 처음 코딩 시간
- 테스트 시간
- 디버깅 시간

특정 기능을 구현하기 위해 코딩을 하면 그 뒤에는 그 기능을 잘 구현했는지 확인하기 위해 테스트를 해야 한다. 테스트를 수행하는 과정에서 문제를 발견하면 원인을 찾기 위해 디버깅을한다.

디버깅하는 과정에서 다시 코드를 수정하고 테스트를하고 디버깅을 한다. 이 과정은 개발을 완료할 대까지 반복된다. 즉 개발 시간은 테스트 전까지의 코딩시간과 테스트 시간 그리고 

문제를 없애기 위한 디버깅 시간을 포함한다.

![image](https://user-images.githubusercontent.com/40031858/136891254-93e97c33-312f-41c0-a5b9-382f2aeb61b3.png)

전체 개발 시간을 줄이려면 코딩 시간뿐만 아니라 테스트 시간과 디버깅 시간을 줄여야 한다. 코딩만 한다고 개발 시간이 줄지는 않는다는 것이다. 테스트가 필요 없을 만큼 한 번에 

완벽하게 구현할 수 있으면 좋겠지만 이는 아주 간단한 기능을 개발할 때나 가능한 일이다. 코드를 만들면 결국 만든 코드가 올바르게 동작하는지 테스트해야 한다. 이 테스트를 

수동으로 진행하면 개발이 진행될수록 테스트 시간은 길어진다

테스트 시간을 줄이려면 테스트를 자동화해야 하는데 테스트를 자동화한다는 것은 테스트를 수행하는 코드를 만든다는 것을 의미한다. TDD는 처음부터 테스트. 코드를 만들기 때문에

반복적인 테스트 시간을 줄여준다. 처음에는 개발 시간을 늘리는 것처럼 보이는 테스트코드가 뒤로 갈수록 반복되는 테스트 코드시간을 줄여주어 오히려 개발시간을 줄여주는 것이다.

코드를 작성한 시점과 테스트를 하는 시점에 차이가 날수록 어떤 문제가 발생했을 때 원인을 찾는데 시간이 필요하다. 아무리 코드를 잘만들었다 하더라도 코드를 읽고 다시 분석해야하기

때문이다. 반면에 TDD는 기능을 구현하자마자 테스트를 진행한다. 바로 전에 코드를 작성했기 때문에 테스트에 실패해도 원인을 빨리 찾을 수 있다. 즉 TDD는 디버깅 시간을 줄여준다

![image](https://user-images.githubusercontent.com/40031858/136891636-d73d3bf6-821d-461c-9bc0-c8370c9654c1.png)

또한, TDD는 리팩토링을 포함한다. 리팩토링을 통해 코드 구조와 가독성을 개선한다. 코드 개선은 향후 코드 수정과 추가를 쉽게 할 수 있게 해준다. 즉 리팩토링은 미래의 코딩시간을

줄여준다. 이렇게 TDD를 활용하면 테스트 시간, 디버깅 시간, 코딩 시간이 줄어 전반적인 개발 시간을 줄일 수 있다.

## 맺음말

TDD는 마치 운동과도 같다. 운동을 꾸준히 하면 건강해지고 체력이 좋아지는 것처럼 TDD도 꾸준히 연습하고 적용해야 실력이 늘고 효과를 볼 수 있다. 초반에 힘들다고 바로 포기하면

오히려 안하는 것만 못하다. 처음엔 쉬운 것을 TDD로 시도해서 TDD에 익숙해지고 이후에 점진적으로 TDD적용 범위를 늘려나가자. 지속적으로 TDD를 갈고 닦다 보면 머지 않은 미래

TDD가 주는 효과를 느끼게 될 것이다. 그러니 TDD가 습관이 될 때까지 연습하고 또 연습하자.

